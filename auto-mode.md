# –ú–µ—Ö–∞–Ω–∏–∑–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ Claude —á–µ—Ä–µ–∑ MCP

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

### 1. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç Backend

–§—Ä–µ–π–º–≤–æ—Ä–∫ –º–æ–∂–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ —É–≤–µ–¥–æ–º–ª—è—Ç—å Claude –æ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á–∞—Ö —á–µ—Ä–µ–∑ MCP –ø—Ä–æ—Ç–æ–∫–æ–ª.

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ Backend:
```python
class TaskNotificationService:
    def notify_claude_about_task(self, task):
        """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ Claude —á–µ—Ä–µ–∑ MCP."""
        if task.priority == "High":
            # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è –≤—ã—Å–æ–∫–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
            mcp_client.send_notification(
                "new_high_priority_task",
                {
                    "task_id": task.id,
                    "title": task.title,
                    "auto_start": True  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É
                }
            )
        else:
            # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –æ—á–µ—Ä–µ–¥—å –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –∑–∞–¥–∞—á
            mcp_client.send_notification(
                "task_added_to_queue",
                {
                    "task_id": task.id,
                    "priority": task.priority
                }
            )
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ Claude —á–µ—Ä–µ–∑ MCP:
```python
# MCP Server handler
@mcp.notification_handler("new_high_priority_task")
async def handle_high_priority_task(notification):
    """Claude –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∑–∞–¥–∞—á–∏ —Å –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º."""
    task_id = notification["task_id"]
    
    # –¢—Ä–∏–≥–≥–µ—Ä –¥–ª—è Claude
    await claude_context.trigger_command(
        "start_task",
        {
            "task_id": task_id,
            "auto_mode": notification.get("auto_start", False)
        }
    )
```

### 2. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (Polling)

Claude –º–æ–∂–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ CLAUDE.md:
```markdown
## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—Ä–∞—Ç—å –∑–∞–¥–∞—á–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º High
- –ó–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è Medium –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
- –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å Low –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ
```

#### MCP –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
```python
@mcp.scheduled_task(interval_minutes=5)
async def check_pending_tasks():
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á."""
    tasks = await get_pending_tasks()
    
    high_priority = [t for t in tasks if t.priority == "High"]
    if high_priority:
        return {
            "action": "auto_start",
            "task": high_priority[0],
            "message": f"üî¥ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–¥–∞—á–∞: {high_priority[0].title}"
        }
    
    medium_priority = [t for t in tasks if t.priority == "Medium"]
    if medium_priority:
        return {
            "action": "request_confirmation",
            "task": medium_priority[0],
            "message": f"üü° –î–æ—Å—Ç—É–ø–Ω–∞ –∑–∞–¥–∞—á–∞: {medium_priority[0].title}"
        }
    
    return {"action": "none", "message": "–ù–µ—Ç –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á"}
```

### 3. Event-Driven —Ä–µ–∂–∏–º

–°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ —Å–æ–±—ã—Ç–∏—è–º, –∫–æ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç Claude.

#### –°–æ–±—ã—Ç–∏—è-—Ç—Ä–∏–≥–≥–µ—Ä—ã:
1. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º –±–∞–≥–æ–º** ‚Üí –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
2. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä—É—é—â–µ–π –∑–∞–¥–∞—á–∏** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç –∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á
3. **–ü—Ä–æ–≤–∞–ª —Ç–µ—Å—Ç–æ–≤ –≤ CI/CD** ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
4. **PR review request** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–¥-—Ä–µ–≤—å—é

#### –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è:
```python
@mcp.event_handler("critical_bug_created")
async def handle_critical_bug(event):
    """–ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥."""
    bug_task = event["task"]
    
    # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—Ç—É
    await pause_current_work()
    
    # –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥
    await switch_to_task(bug_task.id)
    
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç—É
    return {
        "action": "immediate_start",
        "reason": "Critical bug requires immediate attention",
        "expected_time": estimate_fix_time(bug_task)
    }
```

## –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã Claude

### 1. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
```python
class AutoMode:
    """Claude —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –±–µ–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    
    settings = {
        "auto_take_tasks": True,
        "auto_analyze": True,
        "auto_implement": True,
        "auto_test": True,
        "auto_merge": True,
        "require_confirmation": False,
        "priority_threshold": "Low"  # –ë–µ—Ä–µ—Ç –≤—Å–µ –∑–∞–¥–∞—á–∏
    }
```

### 2. –ü–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
```python
class SemiAutoMode:
    """Claude –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —ç—Ç–∞–ø–∞—Ö."""
    
    settings = {
        "auto_take_tasks": True,
        "auto_analyze": True,
        "auto_implement": False,  # –ó–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
        "auto_test": True,
        "auto_merge": False,      # –ó–∞–ø—Ä–æ—Å –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
        "require_confirmation": True,
        "priority_threshold": "Medium"
    }
```

### 3. –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```python
class ManualMode:
    """Claude —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ —è–≤–Ω—ã–º –∫–æ–º–∞–Ω–¥–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
    
    settings = {
        "auto_take_tasks": False,
        "auto_analyze": False,
        "auto_implement": False,
        "auto_test": False,
        "auto_merge": False,
        "require_confirmation": True,
        "priority_threshold": None
    }
```

## –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–º

### –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞:
```
User: "–í–∫–ª—é—á–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á"
Claude: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω.
        –ë—É–¥—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—Ä–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º High.
        –¢–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏: 0
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∂–∏–º–∞:
```
User: "–†–∞–±–æ—Ç–∞–π –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ, –Ω–æ —Å–ø—Ä–∞—à–∏–≤–∞–π –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º"
Claude: –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ–ª—É–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º:
        ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
        ‚ö†Ô∏è  –ó–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞:
```
User: "–°—Ç–æ–ø, –ø–µ—Ä–µ–∫–ª—é—á–∏—Å—å –≤ —Ä—É—á–Ω–æ–π —Ä–µ–∂–∏–º"
Claude: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.
        –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ #5 –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
        –ñ–¥—É –≤–∞—à–∏—Ö –∫–æ–º–∞–Ω–¥.
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ó–∞—â–∏—Ç–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:
1. **–õ–∏–º–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π** - –Ω–µ –±–æ–ª–µ–µ N –∑–∞–¥–∞—á –ø–æ–¥—Ä—è–¥ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π** - –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤, –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
3. **–û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π revert –ø—Ä–∏ –ø—Ä–æ–≤–∞–ª–µ —Ç–µ—Å—Ç–æ–≤
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π** - –ø–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:
```json
{
  "auto_mode_limits": {
    "max_consecutive_tasks": 5,
    "max_files_changed": 50,
    "require_confirmation_for": [
      "delete_files",
      "modify_config",
      "force_push",
      "database_migrations"
    ],
    "pause_on_test_failure": true,
    "rollback_on_error": true
  }
}
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI

### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∂–∏–º–∞ –≤ UI:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Claude Status: üü¢ AUTO MODE     ‚îÇ
‚îÇ Current: Task #3 (In Progress)   ‚îÇ
‚îÇ Queue: 2 tasks pending           ‚îÇ
‚îÇ [Pause] [Switch to Manual]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –õ–æ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π:
```
[10:15] ü§ñ Auto-mode started
[10:16] üìã Took task #3 "Fix login bug"
[10:17] üîç Analysis completed
[10:20] üíª Implementation done
[10:22] ‚úÖ Tests passed
[10:23] üîÄ PR created
[10:24] ‚è∏Ô∏è  Waiting for review (manual step required)
```