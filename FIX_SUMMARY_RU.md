# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–•—É–∫ `post-push-docs.sh` —É—Å–ø–µ—à–Ω–æ –≤—ã–∑—ã–≤–∞–ª API –±—ç–∫–µ–Ω–¥–∞, –Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∞—Å—å –∏ –∫–æ–º–º–∏—Ç—ã –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å.

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

API endpoint `/execute-command` –≤ —Ñ–∞–π–ª–µ `claudetask/backend/app/api/claude_sessions.py`:
- ‚úÖ –ù–∞—Ö–æ–¥–∏–ª PID –ø—Ä–æ—Ü–µ—Å—Å–∞ Claude Code
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–ª —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
- ‚ùå **–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–ª –∫–æ–º–∞–Ω–¥—É –ø—Ä–æ—Ü–µ—Å—Å—É Claude**

–¢–æ –µ—Å—Ç—å API **–≥–æ–≤–æ—Ä–∏–ª**, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, –Ω–æ **–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–ª**.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ü–µ—Ä–µ–ø–∏—Å–∞–ª endpoint `/execute-command` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ—Ç –∂–µ –º–µ—Ö–∞–Ω–∏–∑–º**, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–∫–∏–ª–æ–≤ –∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–∞—Å–∫–∞–º–∏.

### –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ:

**–§–∞–π–ª**: `claudetask/backend/app/api/claude_sessions.py` (—Å—Ç—Ä–æ–∫–∏ 316-423)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–¥:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Å—Å–∏–∏**
   - –ò—â–µ—Ç –∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é Claude –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
   - –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë

2. **–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `real_claude_service` (—Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–∏—Å —á—Ç–æ –¥–ª—è —Å–∫–∏–ª–æ–≤)
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç Claude —á–µ—Ä–µ–∑ `pexpect.spawn('claude --dangerously-skip-permissions')`
   - –ñ–¥—ë—Ç 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ–∫–∞ Claude –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
   - ID —Å–µ—Å—Å–∏–∏: `hook-{uuid}`

3. **–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤ Claude**
   - `await real_claude_service.send_input(session_id, "/update-documentation")`
   - `await real_claude_service.send_input(session_id, "\r")` (–Ω–∞–∂–∞—Ç–∏–µ Enter)
   - –ö–æ–º–∞–Ω–¥–∞ **—Ä–µ–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è** –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Claude!

4. **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Å—Å–∏–∏
   - PID –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞: `pexpect`
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤–≤–æ–¥ –≤ stdin –ø—Ä–æ—Ü–µ—Å—Å–∞
- –ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –≤—ã–≤–æ–¥ –∏–∑ stdout/stderr

### –ü–∞—Ç—Ç–µ—Ä–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
–ö–æ–¥ —Å–ª–µ–¥—É–µ—Ç **—Ç–æ—á–Ω–æ —Ç–∞–∫–æ–º—É –∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω—É**, –∫–∞–∫:
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫–∏–ª–æ–≤ (`/create-skill`)
- –†–∞–±–æ—Ç–∞ —Å —Ç–∞—Å–∫–∞–º–∏ (`/start-feature`)
- –í—Å–µ –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å Claude —Å–µ—Å—Å–∏—è–º–∏

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### –î–û (—Å–ª–æ–º–∞–Ω–Ω—ã–π –∫–æ–¥):
```python
# –ù–∞—Ö–æ–¥–∏—Ç PID
claude_pid = find_claude_pid()

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É—Å–ø–µ—Ö –Ω–æ –ù–ò–ß–ï–ì–û –ù–ï –î–ï–õ–ê–ï–¢!
return {
    "success": True,
    "message": f"Command sent to Claude (PID: {claude_pid})",
    # ‚Üê –ù–ï–¢ –∫–æ–¥–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã!
}
```

### –ü–û–°–õ–ï (—Ä–∞–±–æ—á–∏–π –∫–æ–¥):
```python
# –°–æ–∑–¥–∞—ë—Ç –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç —Å–µ—Å—Å–∏—é
session = await real_claude_service.create_session(...)

# –†–ï–ê–õ–¨–ù–û –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ pexpect
await real_claude_service.send_input(session_id, command)
await real_claude_service.send_input(session_id, "\r")

# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
return {
    "success": True,
    "session_id": session_id,
    "pid": session.child.pid,
    # ‚Üê –ö–æ–º–∞–Ω–¥–∞ –î–ï–ô–°–¢–í–ò–¢–ï–õ–¨–ù–û –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!
}
```

## üß™ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥ —Å–µ—Ä–≤–µ—Ä**
   ```bash
   # –û—Å—Ç–∞–Ω–æ–≤–∏ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–Ω–æ–≤–∞
   cd claudetask/backend
   python -m uvicorn app.main:app --reload --port 3333
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ö—É–∫**
   - –°–¥–µ–ª–∞–π –ª—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ –∫–æ–¥–µ
   - –ó–∞–∫–æ–º–º–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å –≤ main
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ö—É–∫–∞: `.claude/logs/hooks/post-merge-doc-*.log`
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç**
   - –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–∞—è —Å–µ—Å—Å–∏—è Claude
   - –ö–æ–º–∞–Ω–¥–∞ `/update-documentation` –¥–æ–ª–∂–Ω–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ–±–Ω–æ–≤–∏—Ç—å—Å—è
   - –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∫–æ–º–º–∏—Ç —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

### –ë–∞–≥ #1: –õ–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ `[skip-hook]`

**–ü—Ä–æ–±–ª–µ–º–∞**: –•—É–∫ –ø—Ä–æ–≤–µ—Ä—è–ª **–≤–µ—Å—å —Ç–µ–∫—Å—Ç –∫–æ–º–º–∏—Ç–∞**, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫.

**–ü—Ä–∏–º–µ—Ä –∫–æ—Ç–æ—Ä—ã–π –ª–æ–º–∞–ª—Å—è**:
```
feat: Add skip-hook documentation

Added support for [skip-hook] tag.  ‚Üê –≠—Ç–æ –≤ —Ç–µ–ª–µ –∫–æ–º–º–∏—Ç–∞!
```
–•—É–∫ –≤–∏–¥–µ–ª `[skip-hook]` –≤ —Ç–µ–ª–µ –∏ –ø—Ä–æ–ø—É—Å–∫–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
```bash
# –ë–´–õ–û:
LAST_COMMIT_MSG=$(git log -1 --pretty=%B)  # %B = –≤–µ—Å—å —Ç–µ–∫—Å—Ç

# –°–¢–ê–õ–û:
COMMIT_FIRST_LINE=$(git log -1 --pretty=%s)  # %s = —Ç–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫
```

**–§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã**:
- `framework-assets/claude-hooks/post-push-docs.sh`
- `.claude/hooks/post-push-docs.sh`
- `framework-assets/claude-hooks/README.md`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è: `HOOK_INVESTIGATION_RESULTS.md`

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 2025-11-16
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
