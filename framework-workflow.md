# ClaudeTask Framework - Workflow Architecture

–ù–∞ –æ—Å–Ω–æ–≤–µ –∏–∑—É—á–µ–Ω–∏—è AI Tasks and Goals, –≤–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π workflow –¥–ª—è —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ ClaudeTask:

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

### 1. –ö–û–û–†–î–ò–ù–ê–¢–û–† (Claude Main Flow)
- **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏** –∏–∑ ClaudeTask UI
- **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –º–µ–Ω—è–µ—Ç –∫–æ–¥ –Ω–∞–ø—Ä—è–º—É—é** 
- **–°–æ–∑–¥–∞–µ—Ç worktree** –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
- **–î–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å—É–±–∞–≥–µ–Ω—Ç–∞–º** —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- **–ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç merge** –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
- **–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã** –≤ UI —á–µ—Ä–µ–∑ MCP

### 2. –°–£–ë–ê–ì–ï–ù–¢–´ (–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏)
- **–¢–æ–ª—å–∫–æ –æ–Ω–∏ –º–µ–Ω—è—é—Ç –∫–æ–¥**
- **–†–∞–±–æ—Ç–∞—é—Ç –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö worktrees**
- **–ü–æ–ª—É—á–∞—é—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç** –æ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞
- **–í–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** –ø–æ –æ–±–ª–∞—Å—Ç—è–º (frontend, backend, AI, —Ç–µ—Å—Ç—ã)

### 3. –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–í–ï–†–ö–ê
- **Code Review** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- **Testing** –ø–µ—Ä–µ–¥ merge
- **–°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ UI

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á –≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ

### –§–æ—Ä–º–∞—Ç –∑–∞–¥–∞—á–∏ (–∏–∑ Features/web_features_new.md)
```yaml
task:
  id: "task-123"
  title: "–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"
  priority: "High|Medium|Low"
  type: "Feature|Bug"
  status: "Backlog|Analysis|Ready|In Progress|Testing|Code Review|Done"
  sub_agent: "mobile-react-expert|python-api-expert|ai-implementation-expert"
  parallelizable: true|false
  conflicts: "—Å–ø–∏—Å–æ–∫ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤"
  description: "–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"
  functionality: "–°–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"
  value: "–¶–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
```

## üå≥ Worktree Structure –¥–ª—è –∑–∞–¥–∞—á

```
/user-project/                      # main branch
/user-project/worktrees/
  ‚îú‚îÄ‚îÄ task-123-feature/             # Worktree –¥–ª—è –∑–∞–¥–∞—á–∏ #123
  ‚îú‚îÄ‚îÄ task-124-bugfix/              # Worktree –¥–ª—è –∑–∞–¥–∞—á–∏ #124
  ‚îî‚îÄ‚îÄ task-125-feature/             # Worktree –¥–ª—è –∑–∞–¥–∞—á–∏ #125
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã worktrees:
- **–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ = –æ—Ç–¥–µ–ª—å–Ω—ã–π worktree**
- **–ú–∞–∫—Å–∏–º—É–º 3 –∑–∞–¥–∞—á–∏** —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** –ø—Ä–∏ –≤–∑—è—Ç–∏–∏ –∑–∞–¥–∞—á–∏
- **–ß–∏—Å—Ç—ã–π merge** –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** –ø–æ—Å–ª–µ –º–µ—Ä–∂–∞

## üîÑ Task Workflow –≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–µ

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (Backlog ‚Üí Analysis)
```yaml
claude_action:
  - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ MCP: get_next_task()
  - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
  - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã
  - –û—Ü–µ–Ω–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å
  - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞–Ω–∞–ª–∏–∑: save_task_analysis()
  - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å: update_task_status("Analysis")
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Analysis ‚Üí Ready)
```yaml
preparation:
  - –°–æ–∑–¥–∞—Ç—å worktree: git worktree add ./worktrees/task-{id}
  - –°–æ–∑–¥–∞—Ç—å branch: feature/task-{id} –∏–ª–∏ bugfix/task-{id}
  - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—É–±–∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Å—É–±–∞–≥–µ–Ω—Ç–æ–≤
  - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å: update_task_status("Ready")
```

### 3. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É–±–∞–≥–µ–Ω—Ç–∞–º (Ready ‚Üí In Progress)
```yaml
delegation:
  agent: "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Å—É–±–∞–≥–µ–Ω—Ç"
  worktree: "./worktrees/task-{id}"
  task: "–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å"
  context:
    - affected_files: ["—Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤"]
    - requirements: "–¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"
    - constraints: "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è"
  status: update_task_status("In Progress")
```

### 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å—É–±–∞–≥–µ–Ω—Ç–∞–º–∏
–°—É–±–∞–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —Å–≤–æ–µ–π —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

#### mobile-react-expert (Frontend)
- –û–±–ª–∞—Å—Ç—å: `src/components/`, `src/pages/`, `src/hooks/`
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: React, TypeScript, Tailwind, Zustand
- –§–æ–∫—É—Å: Mobile-first, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### python-api-expert (Backend)
- –û–±–ª–∞—Å—Ç—å: `api/`, `models/`, `services/`
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: FastAPI, SQLAlchemy, Pydantic
- –§–æ–∫—É—Å: REST API, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

#### ai-implementation-expert (AI/LLM)
- –û–±–ª–∞—Å—Ç—å: `agents/`, `ai_services/`
- –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏: LangChain, LangGraph, OpenAI
- –§–æ–∫—É—Å: –ü—Ä–æ–º–ø—Ç—ã, –∞–≥–µ–Ω—Ç—ã, AI workflows

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (In Progress ‚Üí Testing)
```yaml
testing:
  - –°—É–±–∞–≥–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É
  - –ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
  - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å: update_task_status("Testing")
```

### 6. Code Review (Testing ‚Üí Code Review)
```yaml
review:
  - Code review —Å—É–±–∞–≥–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –∫–æ–¥–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ PR: gh pr create
  - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å: update_task_status("Code Review")
```

### 7. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ (Code Review ‚Üí Done)
```yaml
completion:
  - Merge –≤ main: git merge feature/task-{id}
  - –û—á–∏—Å—Ç–∫–∞ worktree: git worktree remove
  - –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å: update_task_status("Done")
  - –£–≤–µ–¥–æ–º–∏—Ç—å UI –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
```

## ü§ñ –°—É–±–∞–≥–µ–Ω—Ç—ã —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É–±–∞–≥–µ–Ω—Ç—ã (–∏–∑ .claude/agents/)

1. **mobile-react-expert**
   - Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
   - React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - UI/UX –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

2. **python-api-expert**
   - Backend API
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

3. **ai-implementation-expert**
   - AI –∞–≥–µ–Ω—Ç—ã
   - LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–º–ø—Ç-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥

4. **fullstack-code-reviewer**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
   - –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

5. **background-tester**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - E2E —Ç–µ—Å—Ç—ã
   - –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI —á–µ—Ä–µ–∑ MCP

### MCP –∫–æ–º–∞–Ω–¥—ã –¥–ª—è UI
```python
# –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á
@mcp.command("get_tasks")
async def get_tasks(status: Optional[str] = None):
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –ø–æ —Å—Ç–∞—Ç—É—Å—É"""

# –ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏
@mcp.command("analyze_task")
async def analyze_task(task_id: int):
    """–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏"""

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
@mcp.command("update_task_status")
async def update_task_status(task_id: int, status: str):
    """–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏"""

# –°–æ–∑–¥–∞–Ω–∏–µ worktree
@mcp.command("create_worktree")
async def create_worktree(task_id: int):
    """–°–æ–∑–¥–∞—Ç—å worktree –¥–ª—è –∑–∞–¥–∞—á–∏"""
```

## ‚úÖ Checklist –¥–ª—è Claude (Main Flow)

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –∑–∞–¥–∞—á–∏:
- [ ] –ü–æ–ª—É—á–∏–ª –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ MCP
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- [ ] –û–ø—Ä–µ–¥–µ–ª–∏–ª –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ–º—ã–µ —Ñ–∞–π–ª—ã
- [ ] –°–æ–∑–¥–∞–ª worktree –¥–ª—è –∑–∞–¥–∞—á–∏
- [ ] –í—ã–±—Ä–∞–ª –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å—É–±–∞–≥–µ–Ω—Ç–æ–≤

### –í–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- [ ] –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–ª —Å—É–±–∞–≥–µ–Ω—Ç–∞–º —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- [ ] –û—Ç—Å–ª–µ–∂–∏–≤–∞—é –ø—Ä–æ–≥—Ä–µ—Å—Å —á–µ—Ä–µ–∑ MCP
- [ ] –û–±–Ω–æ–≤–ª—è—é —Å—Ç–∞—Ç—É—Å—ã –≤ UI

### –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ–ª code review
- [ ] –°–æ–∑–¥–∞–ª PR
- [ ] –í—ã–ø–æ–ª–Ω–∏–ª merge
- [ ] –û—á–∏—Å—Ç–∏–ª worktree
- [ ] –û–±–Ω–æ–≤–∏–ª —Å—Ç–∞—Ç—É—Å –Ω–∞ Done

## üö´ –ó–∞–ø—Ä–µ—â–µ–Ω–æ

- ‚ùå Main Flow –ù–ï –º–µ–Ω—è–µ—Ç –∫–æ–¥ –Ω–∞–ø—Ä—è–º—É—é
- ‚ùå –°—É–±–∞–≥–µ–Ω—Ç—ã –ù–ï —Ä–∞–±–æ—Ç–∞—é—Ç –≤–Ω–µ worktrees
- ‚ùå Merge –ë–ï–ó —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ review
- ‚ùå –†–∞–±–æ—Ç–∞ –≤ main branch –Ω–∞–ø—Ä—è–º—É—é
- ‚ùå –ë–æ–ª–µ–µ 3-—Ö –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á
- ‚ùå –°–º–µ—à–∏–≤–∞–Ω–∏–µ –Ω–µ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîë –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç AI Tasks

1. **UI-driven workflow** - –∑–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
2. **MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≤—Å–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞—Ç—É—Å—ã** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
4. **SQLite –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–æ–≤** - –∑–∞–¥–∞—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î
5. **Docker deployment** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
6. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ª—é–±—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π