{
  "name": "Post-Merge Documentation Update",
  "description": "Automatically updates project documentation after merging to main branch or pushing to main",
  "category": "version-control",
  "hook_config": {
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "LOGFILE=\".claude/logs/hooks/post-merge-doc-$(date +%Y%m%d).log\"; mkdir -p .claude/logs/hooks; BASH_CMD=$(echo '$TOOL_INPUT' | jq -r '.command // empty'); echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Hook triggered. Command: $BASH_CMD\" >> \"$LOGFILE\"; if echo \"$BASH_CMD\" | grep -qE '(git merge|gh pr merge|git pull.*origin.*(main|master)|git push.*origin.*(main|master))'; then CURRENT_BRANCH=$(git rev-parse --abbrev-ref HEAD 2>/dev/null || echo 'unknown'); echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Git command detected. Branch: $CURRENT_BRANCH\" >> \"$LOGFILE\"; if [ \"$CURRENT_BRANCH\" = \"main\" ] || [ \"$CURRENT_BRANCH\" = \"master\" ]; then echo \"[$(date '+%Y-%m-%d %H:%M:%S')] ✓ Main branch update detected - triggering /update-documentation\" >> \"$LOGFILE\"; echo '✓ Main branch update detected - triggering documentation update via /update-documentation' && (claude --dangerously-skip-permissions /update-documentation 2>&1 | tee -a \"$LOGFILE\" || echo \"[$(date '+%Y-%m-%d %H:%M:%S')] ✗ Failed to trigger /update-documentation\" >> \"$LOGFILE\"); else echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Not on main branch, skipping\" >> \"$LOGFILE\"; fi; else echo \"[$(date '+%Y-%m-%d %H:%M:%S')] Not a merge/push/pull command, skipping\" >> \"$LOGFILE\"; fi"
          }
        ]
      }
    ]
  },
  "setup_instructions": "This hook automatically triggers documentation updates after merging to main, pulling from main, or pushing to main. It detects git merge, pull, and push commands targeting main/master branch and invokes the /update-documentation slash command, which delegates to the documentation-updater-agent. All hook activity is logged to .claude/logs/hooks/post-merge-doc-YYYYMMDD.log with timestamps. Requirements: 1) /update-documentation slash command must exist in framework-assets/claude-commands/, 2) documentation-updater-agent must exist in framework-assets/claude-agents/, 3) Documentation stored in docs/ directory will be managed (overwritten, created, or deleted as needed).",
  "dependencies": ["git", "jq", "claude CLI (optional for auto-trigger)"]
}
